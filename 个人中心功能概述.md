# 个人中心功能概述 📖

> 租房APP个人中心模块的功能总览和技术要点

---

## 🎯 功能模块总览

### 1. 用户认证系统 🔐
- **验证码登录**：手机号+验证码方式
- **用户注册**：手机号+昵称注册
- **个人资料**：头像、姓名、性别、生日等
- **技术**：reactive状态管理 + localStorage持久化

### 2. 个人中心主页 🏠
- **用户信息卡片**：头像、昵称、谷粒点
- **快捷入口**：9个功能模块快捷访问
- **统计数据**：想看、约看、服务、活动
- **技术**：computed聚合数据 + 响应式布局

### 3. 想看房源 ❤️
- **房源列表**：收藏的房源展示
- **搜索筛选**：关键词、户型、价格
- **批量操作**：多选删除
- **技术**：computed过滤 + 分页

### 4. 足迹记录 👣
- **浏览历史**：查看过的房源
- **时间分组**：按日期分组展示
- **清空功能**：单个或全部删除
- **技术**：数据分组 + 时间格式化

### 5. 约看预约 📅
- **预约管理**：创建、查看、取消
- **状态流转**：待确认→已确认→已完成
- **联系信息**：房东/管家信息
- **技术**：bookingStore + 对话框组件

### 6. 拼租信息 🏘️
- **拼租发布**：发布拼租需求
- **状态管理**：招租中/已满员
- **信息编辑**：修改拼租信息
- **技术**：reactive数据管理

### 7. 订单系统 📋
- **订单创建**：服务预约生成订单
- **状态管理**：5种状态流转
- **订单操作**：查看、修改、删除
- **批量删除**：清空已取消订单
- **技术**：orderStore + 复杂状态机

### 8. 钱包系统 💰
- **余额管理**：充值、提现
- **谷粒点**：签到、兑换
- **交易记录**：完整交易历史
- **奖励机制**：充值送积分
- **技术**：walletStore + 交易流水

### 9. 个人资料 👤
- **基本信息**：姓名、手机、邮箱
- **头像上传**：图片转Base64
- **密码修改**：安全密码设置
- **技术**：表单验证 + FileReader API

---

## 🏗️ 技术架构

```
前端框架: Vue 3 (Composition API)
UI组件库: Element Plus
路由管理: Vue Router 4
状态管理: Reactive API
数据存储: localStorage
构建工具: Vite
代码规范: ESLint + Prettier
```

---

## 📦 核心Store

### authStore（用户认证）
```javascript
- state.users[]          // 用户列表
- state.currentPhone     // 当前登录用户
- currentUser            // computed当前用户
- isAuthenticated        // computed登录状态
- registerUser()         // 注册
- verifyCode()          // 验证码登录
- updateUserProfile()    // 更新资料
- logout()              // 退出登录
```

### bookingStore（预约管理）
```javascript
- state.bookings[]       // 预约列表
- addBooking()          // 添加预约
- updateBookingStatus() // 更新状态
- removeBooking()       // 删除预约
```

### orderStore（订单管理）
```javascript
- state.orders[]         // 订单列表
- createOrder()         // 创建订单
- updateOrderStatus()   // 更新状态
- deleteOrder()         // 删除订单
- deleteCancelledOrders() // 批量删除
```

### walletStore（钱包管理）
```javascript
- state.wallets{}        // 钱包数据
- getUserWallet()       // 获取钱包
- recharge()            // 充值
- withdraw()            // 提现
- earnPoints()          // 赚取积分
- usePoints()           // 使用积分
- getTransactions()     // 交易记录
```

---

## 🔄 数据流

```
用户操作 → 组件事件处理 → Store方法调用 → 状态更新 → 
localStorage持久化 → computed重新计算 → UI响应式更新
```

---

## 💾 数据持久化

### localStorage键值对
```
link-house-auth        // 用户数据
link-house-orders      // 订单数据
link-house-wallet      // 钱包数据
```

### 存储格式
```javascript
// 用户数据
{
  users: [...],
  currentPhone: '18512345678'
}

// 订单数据
[
  {
    id: 'order-123',
    orderNo: 'ORD1730000001234',
    status: 'pending',
    ...
  }
]

// 钱包数据
{
  '18512345678': {
    balance: 2580.00,
    points: 156,
    transactions: [...]
  }
}
```

---

## 🛣️ 路由结构

```
/my                    // 个人中心主页
├─ /my/want           // 想看房源
├─ /my/footprint      // 足迹
├─ /my/appointment    // 约看
├─ /my/share          // 拼租
├─ /my/orders         // 订单
├─ /my/wallet         // 钱包
└─ /my/profile        // 个人资料

/login                 // 登录页
```

---

## 🎨 UI组件

### Element Plus组件
- ElButton（按钮）
- ElDialog（对话框）
- ElForm/ElFormItem（表单）
- ElInput（输入框）
- ElTable（表格）
- ElTabs（标签页）
- ElMessage（消息提示）
- ElMessageBox（确认框）
- ElCard（卡片）
- ElTag（标签）
- ElIcon（图标）
- ElPagination（分页）
- ElUpload（上传）
- ElDatePicker（日期选择）

---

## ⚡ 性能优化

### 已实现
- ✅ computed缓存计算属性
- ✅ 分页加载大列表
- ✅ 路由懒加载
- ✅ 按需引入组件

### 可优化
- 虚拟滚动（长列表）
- 图片懒加载
- 防抖节流（搜索）
- Service Worker（PWA）

---

## 🔒 安全机制

### 当前实现
- 手机号格式验证
- 验证码过期检查
- 表单验证规则
- XSS防护（Vue自动转义）

### 生产环境需要
- JWT Token认证
- HTTPS加密传输
- 密码加密存储（bcrypt）
- CSRF防护
- 接口权限验证
- 敏感信息脱敏

---

## 📊 关键技术点

### 1. 响应式状态管理
```javascript
const state = reactive({ data: [] })
const computed = computed(() => state.data.filter(...))
```

### 2. 组合式API
```javascript
const { currentUser, login, logout } = useAuthStore()
```

### 3. 计算属性
```javascript
const filteredData = computed(() => {
  return data.value.filter(item => item.active)
})
```

### 4. 监听器
```javascript
watch(searchKeyword, () => {
  performSearch()
})
```

### 5. 生命周期
```javascript
onMounted(() => {
  loadData()
})
```

---

## 🚀 快速开始

### 安装依赖
```bash
npm install
```

### 启动开发服务器
```bash
npm run dev
```

### 访问地址
```
http://localhost:5174/
```

### 测试账号
```
手机号：18512345678
验证码：自动生成（弹窗显示）
```

---

## 📁 项目结构

```
src/
├── views/              // 页面组件
│   ├── MyView.vue             // 个人中心主页
│   ├── MyWantView.vue         // 想看房源
│   ├── MyFootprintView.vue    // 足迹
│   ├── MyAppointmentView.vue  // 约看
│   ├── MyShareView.vue        // 拼租
│   ├── MyOrderView.vue        // 订单
│   ├── MyWalletView.vue       // 钱包
│   ├── UserProfileView.vue    // 个人资料
│   └── LoginView.vue          // 登录
│
├── stores/             // 状态管理
│   ├── authStore.js           // 认证
│   ├── bookingStore.js        // 预约
│   ├── orderStore.js          // 订单
│   └── walletStore.js         // 钱包
│
├── router/             // 路由配置
│   └── index.js
│
├── utils/              // 工具函数
│   └── assets.js
│
└── main.js             // 入口文件
```

---

## 🎯 核心功能流程

### 用户注册登录
```
注册 → 填写手机号+昵称 → 创建账号 → 
登录 → 获取验证码 → 验证登录 → 进入个人中心
```

### 订单创建
```
浏览服务 → 选择套餐 → 填写信息 → 提交预约 → 
生成订单 → 查看订单 → 状态管理 → 完成/取消
```

### 钱包使用
```
登录 → 查看余额 → 充值（送积分） → 
签到赚积分 → 积分兑换 → 查看交易记录
```

---

## 💡 设计亮点

1. **统一的数据流**：单向数据流，状态可预测
2. **模块化设计**：功能独立，易于维护
3. **响应式体验**：实时更新，无需刷新
4. **完善的反馈**：操作提示，错误处理
5. **数据持久化**：本地存储，状态保持
6. **类型安全**：TypeScript支持（可选）

---

## 📈 未来规划

- [ ] 后端API集成
- [ ] WebSocket实时通知
- [ ] PWA离线支持
- [ ] 移动端优化
- [ ] 单元测试覆盖
- [ ] 性能监控
- [ ] 错误追踪
- [ ] 数据分析

---

**更多详细信息请查看：** `个人中心功能实现技术文档.md`

